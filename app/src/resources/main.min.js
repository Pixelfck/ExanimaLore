const CopyID=function(){function e(){}return Object.assign(e.prototype,{init:function(){navigator.clipboard&&this.loadCopyIdStylesheet()},loadCopyIdStylesheet:function(){const e=document.createElement("link");e.rel="stylesheet",e.href="resources/copyId.min.css",e.addEventListener("load",(()=>{this.addCopyIcons()}),{once:!0});const t=document.querySelectorAll('link[rel="stylesheet"]');t[t.length-1].after(e)},addCopyIcons:function(){document.querySelectorAll("tr[id] td:first-child, .diviners-deck-card[id] div").forEach((e=>{const t=document.createElement("div");t.classList.add("svg-icon","svg-icon--copy"),t.addEventListener("click",(e=>this.onClick(e))),e.appendChild(t)}));const e=document.createElement("div");e.classList.add("copy-message"),e.innerHTML="URL copied to clipboard.",document.body.appendChild(e)},onClick:function(e){this.copyIdToClipboard(e.target.closest("[id]"))},copyIdToClipboard:function(e){if(!e.id)return;let t=document.location.href;document.location.hash&&(t=t.substring(0,t.length-document.location.hash.length)),t+="#"+e.id,navigator.clipboard.writeText(t).then((()=>{this.showCopyMessage()}))},showCopyMessage:function(){document.querySelector(".copy-message").classList.add("copy-message--visible"),window.setTimeout(this.hideCopyMessage,1250)},hideCopyMessage:function(){document.querySelector(".copy-message").classList.remove("copy-message--visible")}}),e}(),DivinersDeck=function(){function e(){}return Object.assign(e.prototype,{init:function(){window.addEventListener("hashchange",(()=>this.onHashChange())),document.querySelectorAll(".diviners-deck-card a").forEach((e=>{e.addEventListener("click",(e=>this.onCardClick(e)))})),this.onHashChange()},onHashChange:function(){if(!document.location.hash)return;const e=this.getTargetCardImage(document.location.hash);e&&window.setTimeout((()=>this.popupCart(e)),400)},onCardClick:function(e){e.preventDefault(),this.popupCart(e.target)},onOverlayClick:function(e){const t=e.target.classList.contains(".overlay")?e.target:e.target.closest(".overlay"),n=document.querySelector(".card-wrapper");t.addEventListener("transitionend",(()=>document.body.removeChild(t)),{passive:!0,once:!0}),t.style.opacity=0,n.style.opacity=0},popupCart:function(e){let t,n=document.getElementById("DivinersDeckCardBackSide");n===e?(t=n.cloneNode(!1),n=this.getRandomCardFront()):(t=e.cloneNode(!1),n=n.cloneNode(!1)),t.classList.add("card-front"),n.classList.add("card-back");const o=document.createElement("div");o.classList.add("card-wrapper"),o.appendChild(n),o.appendChild(t);const i=document.createElement("div");i.classList.add("overlay--close-btn"),i.ariaLabel="close",i.innerText="Ã—";const c=document.createElement("div");c.classList.add("overlay"),c.addEventListener("click",(e=>this.onOverlayClick(e))),c.appendChild(i),c.appendChild(o),document.body.appendChild(c)},getTargetCardImage:function(e){const t=document.querySelector(e);return t.classList.contains("diviners-deck-card")?cardImg=t.querySelector("img"):null},getRandomCardFront:function(){const e=document.querySelectorAll(".diviners-deck-card img");return e[this.getRandomIntInclusive(1,e.length-1)].cloneNode(!1)},getRandomIntInclusive:function(e,t){const n=new Uint32Array(1);window.crypto.getRandomValues(n);const o=n[0]/4294967296;return e=Math.ceil(e),t=Math.floor(t),Math.floor(o*(t-e+1))+e}}),e}(),SectionHighlight=function(){const e={cleanup:t.prototype.cleanup};function t(){}return Object.assign(t.prototype,{init:function(){document.querySelector("#Table_of_Contents > ul").addEventListener("click",this.addAnimClass)},addAnimClass:function(t){if(!t.target.href)return;const n=document.getElementById(t.target.getAttribute("href").slice(1));n.classList.contains("highlight-blink")||(n.classList.add("highlight-blink"),n.addEventListener("animationend",e.cleanup),n.addEventListener("animationcancel",e.cleanup))},cleanup:function(t){"highlight-blink"===t.animationName&&(t.target.classList.remove("highlight-blink"),t.target.removeEventListener("animationend",e.cleanup),t.target.removeEventListener("animationcancel",e.cleanup))}}),t}(),ScrollToTop=function(){function e(){}return Object.assign(e.prototype,{init:function(){document.querySelector(".scroll-to-top-link").addEventListener("click",(e=>this.onClick(e)))},onClick:function(e){e.preventDefault(),history.pushState("",document.title,window.location.pathname+window.location.search),document.documentElement.scrollTo({top:0,behavior:"smooth"})}}),e}(),SpoilerWarning=function(){const e="spoilerWarning",t=7889238;function n(){}return Object.assign(n.prototype,{init:function(){this.getCookie(e)||this.loadSpoilerWarningStylesheet()},loadSpoilerWarningStylesheet:function(){const e=document.createElement("link");e.rel="stylesheet",e.href="resources/spoilerWarning.min.css",e.addEventListener("load",(()=>this.showWarning()),{once:!0});const t=document.querySelectorAll('link[rel="stylesheet"]');t[t.length-1].after(e)},showWarning:function(){const e=document.createElement("h1");e.classList.add("spoiler-warning--title"),e.innerText="Here be spoilers!";const t=document.createElement("button");t.classList.add("spoiler-warning--btn"),t.innerText="OK, I understand",t.addEventListener("click",(e=>this.onBtnClick(e)),{passive:!0,once:!0});const n=document.createElement("div");n.classList.add("spoiler-warning"),n.appendChild(e),n.innerHTML+="<p>Exploration and stumbling upon things is an important part of Exanima.</p><p>This document spoils that fun.</p>",n.appendChild(t);const o=document.createElement("div");o.classList.add("spoiler-warning--wrapper","fancy-border"),o.appendChild(n);const i=document.createElement("div");i.classList.add("overlay","overlay--blur"),i.appendChild(o),document.body.appendChild(i)},closeOverlay:function(e){const t=e.target.classList.contains(".overlay")?e.target:e.target.closest(".overlay"),n=document.querySelector(".spoiler-warning--wrapper");t.addEventListener("transitionend",(()=>document.body.removeChild(t)),{passive:!0,once:!0}),t.style.opacity=0,n.opacity=0},onBtnClick:function(n){this.setCookie(e,"warningDismissed",t),this.closeOverlay(n)},getCookie:function(e){const t=RegExp(e+"=[^;]+").exec(document.cookie);return t?decodeURIComponent(t.toString().replace(/^[^=]+./,"")):null},setCookie:function(e,t,n){document.cookie=e+"="+t+"; path=/; max-age="+n}}),n}();document.addEventListener("DOMContentLoaded",(function(){(new SpoilerWarning).init(),(new CopyID).init(),(new ScrollToTop).init(),(new DivinersDeck).init(),(new SectionHighlight).init()}));
//# sourceMappingURL=main.min.js.map