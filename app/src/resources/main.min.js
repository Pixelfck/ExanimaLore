const CopyID=function(){function e(){}return Object.assign(e.prototype,{init:function(){navigator.clipboard&&this.loadCopyIdStylesheet()},loadCopyIdStylesheet:function(){const e=document.createElement("link");e.rel="stylesheet",e.href="resources/copyId.min.css",e.addEventListener("load",(()=>{this.addCopyIcons()}),{once:!0});const t=document.querySelectorAll('link[rel="stylesheet"]');t[t.length-1].after(e)},addCopyIcons:function(){document.querySelectorAll("tr[id] td:first-child, .diviners-deck-card[id] div").forEach((e=>{const t=document.createElement("div");t.classList.add("svg-icon","svg-icon--copy"),t.addEventListener("click",(e=>this.onClick(e))),e.appendChild(t)}));const e=document.createElement("div");e.classList.add("copy-message"),e.innerHTML="URL copied to clipboard.",document.body.appendChild(e)},onClick:function(e){this.copyIdToClipboard(e.target.closest("[id]"))},copyIdToClipboard:function(e){if(!e.id)return;let t=document.location.href;document.location.hash&&(t=t.substring(0,t.length-document.location.hash.length)),t+="#"+e.id,navigator.clipboard.writeText(t).then((()=>{this.showCopyMessage()}))},showCopyMessage:function(){document.querySelector(".copy-message").classList.add("copy-message--visible"),window.setTimeout(this.hideCopyMessage,1250)},hideCopyMessage:function(){document.querySelector(".copy-message").classList.remove("copy-message--visible")}}),e}(),DivinersDeck=function(){function e(){}return Object.assign(e.prototype,{init:function(){window.addEventListener("hashchange",(()=>this.onHashChange())),document.querySelectorAll(".diviners-deck-card a").forEach((e=>{e.addEventListener("click",(e=>this.onCardClick(e)))})),this.onHashChange()},onHashChange:function(){const e=this.getTargetCardImage(document.location.hash);e&&this.popupCart(e)},onCardClick:function(e){e.preventDefault(),this.popupCart(e.target)},onOverlayClick:function(e){const t=document.querySelector(".overlay"),n=document.querySelector(".card-wrapper");t.addEventListener("transitionend",this.removeOverlay,{passive:!0,once:!0}),t.style.opacity=0,n.style.opacity=0},popupCart:function(e){let t,n=document.getElementById("DivinersDeckCardBackSide");n===e?(t=n.cloneNode(!1),n=this.getRandomCardFront()):(t=e.cloneNode(!1),n=n.cloneNode(!1)),t.classList.add("card-front"),n.classList.add("card-back");const o=document.createElement("div");o.classList.add("card-wrapper"),o.appendChild(n),o.appendChild(t);const c=document.createElement("div");c.classList.add("overlay--closeBtn"),c.ariaLabel="close",c.innerText="Ã—";const i=document.createElement("div");i.classList.add("overlay"),i.addEventListener("click",(e=>this.onOverlayClick(e))),i.appendChild(c),i.appendChild(o),document.body.appendChild(i)},removeOverlay:function(){document.body.removeChild(document.querySelector(".overlay"))},getTargetCardImage:function(e){const t=document.querySelector(e);return t.classList.contains("diviners-deck-card")?cardImg=t.querySelector("img"):null},getRandomCardFront:function(){const e=document.querySelectorAll(".diviners-deck-card img");return e[this.getRandomIntInclusive(1,e.length-1)].cloneNode(!1)},getRandomIntInclusive:function(e,t){const n=new Uint32Array(1);window.crypto.getRandomValues(n);const o=n[0]/4294967296;return e=Math.ceil(e),t=Math.floor(t),Math.floor(o*(t-e+1))+e}}),e}(),ScrollToTop=function(){function e(){}return Object.assign(e.prototype,{init:function(){document.querySelector(".scroll-to-top-link").addEventListener("click",(e=>this.onClick(e)))},onClick:function(e){e.preventDefault(),history.pushState("",document.title,window.location.pathname+window.location.search),document.documentElement.scrollTo({top:0,behavior:"smooth"})}}),e}();document.addEventListener("DOMContentLoaded",(function(){(new CopyID).init(),(new DivinersDeck).init(),(new ScrollToTop).init()}));
//# sourceMappingURL=main.min.js.map